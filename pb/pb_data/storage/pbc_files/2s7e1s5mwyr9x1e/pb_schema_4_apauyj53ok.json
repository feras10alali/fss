[
  {
    "id": "pbc_favorites",
    "listRule": "@request.auth.id != \"\" && user = @request.auth.id",
    "viewRule": "@request.auth.id != \"\" && user = @request.auth.id",
    "createRule": "@request.auth.id != \"\" && user = @request.auth.id",
    "updateRule": "@request.auth.id != \"\" && user = @request.auth.id",
    "deleteRule": "@request.auth.id != \"\" && user = @request.auth.id",
    "name": "favorites",
    "type": "base",
    "fields": [
      {
        "autogeneratePattern": "[a-z0-9]{15}",
        "hidden": false,
        "id": "text3208210256",
        "max": 15,
        "min": 15,
        "name": "id",
        "pattern": "^[a-z0-9]+$",
        "presentable": false,
        "primaryKey": true,
        "required": true,
        "system": true,
        "type": "text"
      },
      {
        "cascadeDelete": false,
        "collectionId": "_pb_users_auth_",
        "hidden": false,
        "id": "relation2020202020",
        "maxSelect": 1,
        "minSelect": 1,
        "name": "user",
        "presentable": false,
        "required": true,
        "system": false,
        "type": "relation"
      },
      {
        "hidden": false,
        "id": "select2121212121",
        "maxSelect": 1,
        "name": "resource_type",
        "presentable": false,
        "required": true,
        "system": false,
        "type": "select",
        "values": [
          "file",
          "folder"
        ]
      },
      {
        "autogeneratePattern": "",
        "hidden": false,
        "id": "text2222222223",
        "max": 15,
        "min": 15,
        "name": "resource_id",
        "pattern": "^[a-z0-9]+$",
        "presentable": false,
        "primaryKey": false,
        "required": true,
        "system": false,
        "type": "text"
      },
      {
        "hidden": false,
        "id": "autodate2990389176",
        "name": "created",
        "onCreate": true,
        "onUpdate": false,
        "presentable": false,
        "system": false,
        "type": "autodate"
      }
    ],
    "indexes": [
      "CREATE UNIQUE INDEX `idx_user_resource_favorites` ON `favorites` (`user`, `resource_type`, `resource_id`)",
      "CREATE INDEX `idx_user_favorites` ON `favorites` (`user`)"
    ],
    "system": false
  },
  {
    "id": "pbc_files",
    "listRule": "@request.auth.id != \"\" && (owner = @request.auth.id || @collection.shares.resource_id ?= id && @collection.shares.resource_type = \"file\" && @collection.shares.is_active = true && (@collection.shares.shared_with = @request.auth.id || @collection.shares.shared_with = \"\")) && is_deleted = false",
    "viewRule": "@request.auth.id != \"\" && (owner = @request.auth.id || @collection.shares.resource_id ?= id && @collection.shares.resource_type = \"file\" && @collection.shares.is_active = true) && is_deleted = false",
    "createRule": "@request.auth.id != \"\" && owner = @request.auth.id",
    "updateRule": "@request.auth.id != \"\" && owner = @request.auth.id",
    "deleteRule": "@request.auth.id != \"\" && owner = @request.auth.id",
    "name": "files",
    "type": "base",
    "fields": [
      {
        "autogeneratePattern": "[a-z0-9]{15}",
        "hidden": false,
        "id": "text3208210256",
        "max": 15,
        "min": 15,
        "name": "id",
        "pattern": "^[a-z0-9]+$",
        "presentable": false,
        "primaryKey": true,
        "required": true,
        "system": true,
        "type": "text"
      },
      {
        "autogeneratePattern": "",
        "hidden": false,
        "id": "text5555555555",
        "max": 255,
        "min": 1,
        "name": "name",
        "pattern": "",
        "presentable": true,
        "primaryKey": false,
        "required": true,
        "system": false,
        "type": "text"
      },
      {
        "hidden": false,
        "id": "file6666666666",
        "maxSelect": 1,
        "maxSize": 0,
        "mimeTypes": [],
        "name": "file",
        "presentable": false,
        "protected": false,
        "required": true,
        "system": false,
        "thumbs": [],
        "type": "file"
      },
      {
        "hidden": false,
        "id": "number7777777777",
        "max": null,
        "min": 0,
        "name": "size",
        "onlyInt": false,
        "presentable": false,
        "required": true,
        "system": false,
        "type": "number"
      },
      {
        "autogeneratePattern": "",
        "hidden": false,
        "id": "text8888888888",
        "max": 255,
        "min": 0,
        "name": "mime_type",
        "pattern": "",
        "presentable": false,
        "primaryKey": false,
        "required": true,
        "system": false,
        "type": "text"
      },
      {
        "cascadeDelete": false,
        "collectionId": "_pb_users_auth_",
        "hidden": false,
        "id": "relation9999999999",
        "maxSelect": 1,
        "minSelect": 1,
        "name": "owner",
        "presentable": false,
        "required": true,
        "system": false,
        "type": "relation"
      },
      {
        "cascadeDelete": false,
        "collectionId": "pbc_folders",
        "hidden": false,
        "id": "relation1010101010",
        "maxSelect": 1,
        "minSelect": 0,
        "name": "parent_folder",
        "presentable": false,
        "required": false,
        "system": false,
        "type": "relation"
      },
      {
        "hidden": false,
        "id": "bool1111111112",
        "name": "is_deleted",
        "presentable": false,
        "required": false,
        "system": false,
        "type": "bool"
      },
      {
        "hidden": false,
        "id": "autodate2990389176",
        "name": "created",
        "onCreate": true,
        "onUpdate": false,
        "presentable": false,
        "system": false,
        "type": "autodate"
      },
      {
        "hidden": false,
        "id": "autodate3332085495",
        "name": "updated",
        "onCreate": true,
        "onUpdate": true,
        "presentable": false,
        "system": false,
        "type": "autodate"
      }
    ],
    "indexes": [
      "CREATE INDEX `idx_owner_files` ON `files` (`owner`)",
      "CREATE INDEX `idx_parent_files` ON `files` (`parent_folder`)",
      "CREATE INDEX `idx_mime_type_files` ON `files` (`mime_type`)"
    ],
    "system": false
  },
  {
    "id": "pbc_folders",
    "listRule": "@request.auth.id != \"\" && (owner = @request.auth.id || @collection.shares.resource_id ?= id && @collection.shares.resource_type = \"folder\" && @collection.shares.is_active = true && (@collection.shares.shared_with = @request.auth.id || @collection.shares.shared_with = \"\")) && is_deleted = false",
    "viewRule": "@request.auth.id != \"\" && (owner = @request.auth.id || @collection.shares.resource_id ?= id && @collection.shares.resource_type = \"folder\" && @collection.shares.is_active = true) && is_deleted = false",
    "createRule": "@request.auth.id != \"\" && owner = @request.auth.id",
    "updateRule": "@request.auth.id != \"\" && owner = @request.auth.id",
    "deleteRule": "@request.auth.id != \"\" && owner = @request.auth.id",
    "name": "folders",
    "type": "base",
    "fields": [
      {
        "autogeneratePattern": "[a-z0-9]{15}",
        "hidden": false,
        "id": "text3208210256",
        "max": 15,
        "min": 15,
        "name": "id",
        "pattern": "^[a-z0-9]+$",
        "presentable": false,
        "primaryKey": true,
        "required": true,
        "system": true,
        "type": "text"
      },
      {
        "autogeneratePattern": "",
        "hidden": false,
        "id": "text1111111111",
        "max": 255,
        "min": 1,
        "name": "name",
        "pattern": "",
        "presentable": true,
        "primaryKey": false,
        "required": true,
        "system": false,
        "type": "text"
      },
      {
        "cascadeDelete": false,
        "collectionId": "_pb_users_auth_",
        "hidden": false,
        "id": "relation2222222222",
        "maxSelect": 1,
        "minSelect": 1,
        "name": "owner",
        "presentable": false,
        "required": true,
        "system": false,
        "type": "relation"
      },
      {
        "cascadeDelete": false,
        "collectionId": "pbc_folders",
        "hidden": false,
        "id": "relation3333333333",
        "maxSelect": 1,
        "minSelect": 0,
        "name": "parent_folder",
        "presentable": false,
        "required": false,
        "system": false,
        "type": "relation"
      },
      {
        "hidden": false,
        "id": "bool4444444444",
        "name": "is_deleted",
        "presentable": false,
        "required": false,
        "system": false,
        "type": "bool"
      },
      {
        "hidden": false,
        "id": "autodate2990389176",
        "name": "created",
        "onCreate": true,
        "onUpdate": false,
        "presentable": false,
        "system": false,
        "type": "autodate"
      },
      {
        "hidden": false,
        "id": "autodate3332085495",
        "name": "updated",
        "onCreate": true,
        "onUpdate": true,
        "presentable": false,
        "system": false,
        "type": "autodate"
      }
    ],
    "indexes": [
      "CREATE INDEX `idx_owner_folders` ON `folders` (`owner`)",
      "CREATE INDEX `idx_parent_folders` ON `folders` (`parent_folder`)"
    ],
    "system": false
  },
  {
    "id": "pbc_recent_activity",
    "listRule": "@request.auth.id != \"\" && user = @request.auth.id",
    "viewRule": "@request.auth.id != \"\" && user = @request.auth.id",
    "createRule": "@request.auth.id != \"\" && user = @request.auth.id",
    "updateRule": null,
    "deleteRule": "@request.auth.id != \"\" && user = @request.auth.id",
    "name": "recent_activity",
    "type": "base",
    "fields": [
      {
        "autogeneratePattern": "[a-z0-9]{15}",
        "hidden": false,
        "id": "text3208210256",
        "max": 15,
        "min": 15,
        "name": "id",
        "pattern": "^[a-z0-9]+$",
        "presentable": false,
        "primaryKey": true,
        "required": true,
        "system": true,
        "type": "text"
      },
      {
        "cascadeDelete": false,
        "collectionId": "_pb_users_auth_",
        "hidden": false,
        "id": "relation2323232323",
        "maxSelect": 1,
        "minSelect": 1,
        "name": "user",
        "presentable": false,
        "required": true,
        "system": false,
        "type": "relation"
      },
      {
        "hidden": false,
        "id": "select2424242424",
        "maxSelect": 1,
        "name": "action",
        "presentable": false,
        "required": true,
        "system": false,
        "type": "select",
        "values": [
          "upload",
          "download",
          "share",
          "delete",
          "rename",
          "move",
          "create_folder"
        ]
      },
      {
        "hidden": false,
        "id": "select2525252525",
        "maxSelect": 1,
        "name": "resource_type",
        "presentable": false,
        "required": true,
        "system": false,
        "type": "select",
        "values": [
          "file",
          "folder"
        ]
      },
      {
        "autogeneratePattern": "",
        "hidden": false,
        "id": "text2626262626",
        "max": 15,
        "min": 15,
        "name": "resource_id",
        "pattern": "^[a-z0-9]+$",
        "presentable": false,
        "primaryKey": false,
        "required": true,
        "system": false,
        "type": "text"
      },
      {
        "autogeneratePattern": "",
        "hidden": false,
        "id": "text2727272727",
        "max": 255,
        "min": 1,
        "name": "resource_name",
        "pattern": "",
        "presentable": true,
        "primaryKey": false,
        "required": true,
        "system": false,
        "type": "text"
      },
      {
        "hidden": false,
        "id": "json2828282828",
        "maxSize": 0,
        "name": "details",
        "presentable": false,
        "required": false,
        "system": false,
        "type": "json"
      },
      {
        "hidden": false,
        "id": "autodate2990389176",
        "name": "created",
        "onCreate": true,
        "onUpdate": false,
        "presentable": false,
        "system": false,
        "type": "autodate"
      }
    ],
    "indexes": [
      "CREATE INDEX `idx_user_activity` ON `recent_activity` (`user`, `created`)",
      "CREATE INDEX `idx_resource_activity` ON `recent_activity` (`resource_type`, `resource_id`)"
    ],
    "system": false
  },
  {
    "id": "pbc_shares",
    "listRule": "@request.auth.id != \"\" && (owner = @request.auth.id || shared_with = @request.auth.id)",
    "viewRule": "@request.auth.id != \"\" && (owner = @request.auth.id || shared_with = @request.auth.id || shared_with = \"\")",
    "createRule": "@request.auth.id != \"\" && owner = @request.auth.id",
    "updateRule": "@request.auth.id != \"\" && owner = @request.auth.id",
    "deleteRule": "@request.auth.id != \"\" && owner = @request.auth.id",
    "name": "shares",
    "type": "base",
    "fields": [
      {
        "autogeneratePattern": "[a-z0-9]{15}",
        "hidden": false,
        "id": "text3208210256",
        "max": 15,
        "min": 15,
        "name": "id",
        "pattern": "^[a-z0-9]+$",
        "presentable": false,
        "primaryKey": true,
        "required": true,
        "system": true,
        "type": "text"
      },
      {
        "hidden": false,
        "id": "select1212121212",
        "maxSelect": 1,
        "name": "resource_type",
        "presentable": false,
        "required": true,
        "system": false,
        "type": "select",
        "values": [
          "file",
          "folder"
        ]
      },
      {
        "autogeneratePattern": "",
        "hidden": false,
        "id": "text1313131313",
        "max": 15,
        "min": 15,
        "name": "resource_id",
        "pattern": "^[a-z0-9]+$",
        "presentable": false,
        "primaryKey": false,
        "required": true,
        "system": false,
        "type": "text"
      },
      {
        "cascadeDelete": false,
        "collectionId": "_pb_users_auth_",
        "hidden": false,
        "id": "relation1414141414",
        "maxSelect": 1,
        "minSelect": 1,
        "name": "owner",
        "presentable": false,
        "required": true,
        "system": false,
        "type": "relation"
      },
      {
        "cascadeDelete": false,
        "collectionId": "_pb_users_auth_",
        "hidden": false,
        "id": "relation1515151515",
        "maxSelect": 1,
        "minSelect": 0,
        "name": "shared_with",
        "presentable": false,
        "required": false,
        "system": false,
        "type": "relation"
      },
      {
        "hidden": false,
        "id": "select1616161616",
        "maxSelect": 1,
        "name": "permission",
        "presentable": false,
        "required": true,
        "system": false,
        "type": "select",
        "values": [
          "view",
          "edit",
          "comment"
        ]
      },
      {
        "autogeneratePattern": "[a-zA-Z0-9]{32}",
        "hidden": false,
        "id": "text1717171717",
        "max": 32,
        "min": 32,
        "name": "share_token",
        "pattern": "^[a-zA-Z0-9]+$",
        "presentable": false,
        "primaryKey": false,
        "required": true,
        "system": false,
        "type": "text"
      },
      {
        "hidden": false,
        "id": "date1818181818",
        "max": "",
        "min": "",
        "name": "expires_at",
        "presentable": false,
        "required": false,
        "system": false,
        "type": "date"
      },
      {
        "hidden": false,
        "id": "bool1919191919",
        "name": "is_active",
        "presentable": false,
        "required": false,
        "system": false,
        "type": "bool"
      },
      {
        "hidden": false,
        "id": "autodate2990389176",
        "name": "created",
        "onCreate": true,
        "onUpdate": false,
        "presentable": false,
        "system": false,
        "type": "autodate"
      },
      {
        "hidden": false,
        "id": "autodate3332085495",
        "name": "updated",
        "onCreate": true,
        "onUpdate": true,
        "presentable": false,
        "system": false,
        "type": "autodate"
      }
    ],
    "indexes": [
      "CREATE UNIQUE INDEX `idx_share_token_shares` ON `shares` (`share_token`)",
      "CREATE INDEX `idx_resource_shares` ON `shares` (`resource_type`, `resource_id`)",
      "CREATE INDEX `idx_owner_shares` ON `shares` (`owner`)",
      "CREATE INDEX `idx_shared_with_shares` ON `shares` (`shared_with`)"
    ],
    "system": false
  }
]